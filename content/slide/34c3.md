---
title: "34c3 Lightning Talk"
date: 2017-12-18
menu:
  main:
    parent: Slides
revealoptions:
  transition: fade
description: "Lightning talk at 34c3, Leipzig 2017"
---

# NeoPG

## A replacement for GnuPG

<small>
_Marcus Brinkmann · 34c3 · Leipzig (2017)_
</small>

---

## OpenPGP is in trouble

<canvas class="stretch" data-chart="line">
SKS Uploads/Thousand, 315.344, 376.343, 414.952, 244.339, 176.660, 147.771, 149.171, 152.243, 121.457, 127.064, 130.802, 132.074, 122.065, 127.413, 162.920, 306.447, 360.199, 324.706, 328.173, 279.097
<!--
{
"data" : {
	"labels" : ["1998", "1999", "2000", "2001", "2002", "2003", "2004", "2005", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017"],
	"datasets" : [{ "borderColor": "orange" } ]
	}
}
-->
</canvas>

---

## OpenPGP Standardization

<div class="ui vertical">
<div class="ui grid" style="font-size: 80%;">
  <div class="eight wide column">
  <table class="noborder">
  <tr><td>1998</td><td>RFC2440</td></tr>
  <tr><td>2007</td><td>RFC4880 MAC</td></tr>
  <tr><td>2009</td><td>RFC5581 Camellia</td></tr>
  <tr><td>2012</td><td>RFC6637 ECC</td></tr>
  <tr style="color: #888;"><td>2014</td><td>_ECC (EdDSA)_</td></tr>
  <tr style="color: #888;"><td>2015</td><td>_AEAD, Device Certs_</td></tr>
  <tr style="color: #888;"><td>2017</td><td>_SCA, WKD_</td></tr>
  </table>
  </div>
  <div class="eight wide column">
  <table class="noborder">
  <tr><td>2015</td><td>IETF WG reopened</td></tr>
  <tr style="color: #888;"><td>2016</td><td>_ECC, AEAD, SHA256_</td></tr>
  <tr><td>2017</td><td>IETF WG closed</td></tr>
  </table>
  <div class="ui divider"></div>
  <blockquote style="margin: 0; width: 100%;">
     "[...] there is not sufficient interest to successfully complete the work of the working group."
    – IESG Secretary, 11 Nov 2017
  </blockquote>
  </div>
</div>
</div>

---

## 20y GnuPG

* GnuPG 1.4
  * _"old, single binary version"_
  * _"support the unsafe PGP-2 keys"_
  * _"no dependencies"_ (not even `libgcrypt`)
* GnuPG 2.2
  * depends on `libgpg-error`, `libgcrypt`, `libksba`, `libassuan`, `ntbtls` or
`gnutls`, `npth`, `pinentry`

---

## 20y libgcrypt

* CVE-2017-0379 - breaks Curve25519 (2016-...)
 * Should have used reference implementation
* CVE-2017-7526 - breaks RSA 1024 (since 2000)
 * Should have looked at OpenSSL 2005-2016
* CVE-2016-6313 - flaw in PRNG (since 1998)
 * Should have used e.g. `HMAC_DRBG` (2012)

---

## 20y Key Retrieval

<table class="noborder">
<tr><td>1999</td><td>Keyserver (HTTP, HTTPS)</td></tr>
<tr><td>2006</td><td>PKA / RFC4398 (DNS)</td></tr>
<tr><td>2015</td><td>RFC7929 OPENPGPKEYS (DNS<strike>SEC</strike>)</td></tr>
<tr><td>2017</td><td>Web Key Directory (DNS+Email+HTTPS)</td></tr>
</table>

---

## 20y Trust Management

<table class="noborder">
<tr><td>1999</td><td>Web of Trust (manual trust delegation)</td></tr>
<tr><td>2002</td><td>Web of Trust w/ trust signatures</td></tr>
<tr><td>2015</td><td>Trust on first use (TOFU)</td></tr>
</table>

---

## NeoPG

* git-style subcommands (and subcommands of subcommands)
* colors!
* gpg2-compatible legacy interface
* single binary (portable apps friendly)
* no system-wide configuration, no daemons, no complicated packaging
* kitchen sink included (hash, compress, armor, random)

---

## Collaboration

* 2-clause BSD license (nobody has time for license wars)
* hosted on GitHub
* pull requests welcome (no contributor agreement needed)

---

## Coding like it's the early 2000's!

* C++11 (gcc >= 4.8, clang, MSVC)
* Heavy use of STL for memory management
* Boost to fill the gaps in STL and abstract platform specific code
* Botan for cryptographic primitives and higher level protocol support

---

## Finally, a library!

* libneopg is the "library for GPG" that never was
* easy high-level interface
* transparent in depth
* all policy decisions replaceable (trust interface, passphrase lookup, etc)
* libgpgme-compatible legacy interface

---

## Focus on Code Quality

* Unit-testing (easy because of libneopg)
* Continuous integration on Linux, MacOS and Windows (Travis, AppVoyeur)
* Fuzzing
* Static code analysis
* Linting, Source Code Formatting (clang-format)

---

## Efficiency

* New key database based on SQLite3.
* Works with large key databases (Debian keyring).
* Efficient programming with high-level abstractions and well-organized components.

---

## Hardware-based security

* Smartcard support out of the box (OpenPGP Card, Gnuk, Yubikey?)
* based on PCSCD (Linux+MacOS, cooperates with other apps)

---

## Beyond the web of trust

* New trust models easy to write.
* keybase.io integration
* Central keyserver that actually verifies email addresses.
* neopg tweet @lambdafu "Do you know yolo-encryption?"


---

## <i class="ui icon globe orange"></i>neopg.io
## <i class="ui icon twitter orange"></i>@neopg_